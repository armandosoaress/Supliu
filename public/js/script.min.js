async function seachdiscografia(){try{const data=await fetch("http://127.0.0.1:8000/Discografia");return await data.json()}catch(err){return console.log(err)}}async function insertdiscografia(id){Swal.fire({imageUrl:"./image/gif/a56fc90a5ed23e3047aa9cc902750b54.gif",showConfirmButton:!1,background:"#141414"});const discografia=await seachdiscografia();localStorage.setItem("discografia",JSON.stringify(discografia)),Swal.close();const tabela=`\n${discografia.map(album=>`\n<table style="background-color: #ffffffa3;" class="centered">\n    <caption style="background-color: #ffffffa3;text-align: left;padding-left: 65px;font-weight: 800;">&Aacute;lbum ${album.nome} - ${album.id}</caption>\n    <thead>\n    <tr>\n        <th style="text-align: left;font-weight: 400; padding: 15px 65px;">N&ordm;</th>\n        <th style="text-align: left;font-weight: 400;">Faixa</th>\n        <th style="text-align: left;font-weight: 400; padding: 15px 65px;">Dura&ccedil;&atilde;o</th>\n    </tr>\n    </thead>\n    <tbody>\n    ${album.faixas.map(faixa=>`\n        <tr>\n        <td>${faixa.id}</td>\n        <td style="text-align: left; word-break: break-all; width: 100%;">${faixa.nome}</td>\n        <td>${faixa.duracao}</td>\n        </tr>\n    `).join("")}\n    </tbody>\n</table>\n`).join("")}\n`;document.getElementById("tabela").innerHTML=tabela}insertdiscografia();var inputElement=document.getElementById("busca");function seach(text){const valor=text,discografia=JSON.parse(localStorage.getItem("discografia")),resultado=discografia.filter(album=>album.nome.toLowerCase().includes(valor));if(0==resultado.length)return seachfaixa(text);document.getElementById("tabela").innerHTML=`\n    ${resultado.map(album=>`\n    <table style="background-color: #ffffffa3;" class="centered">\n        <caption style="background-color: #ffffffa3;text-align: left;padding-left: 65px;font-weight: 800;">&Aacute;lbum ${album.nome} - ${album.id}</caption>\n        <thead>\n        <tr>\n            <th style="text-align: left;font-weight: 400; padding: 15px 65px;">N&ordm;</th>\n            <th style="text-align: left;font-weight: 400;">Faixa</th>\n            <th style="text-align: left;font-weight: 400; padding: 15px 65px;">Dura&ccedil;&atilde;o</th>\n        </tr>\n        </thead>\n        <tbody>\n        ${album.faixas.map(faixa=>`\n            <tr>\n            <td>${faixa.id}</td>\n            <td style="text-align: left; word-break: break-all; width: 100%;">${faixa.nome}</td>\n            <td>${faixa.duracao}</td>\n            </tr>\n        `).join("")}\n        </tbody>\n    </table>\n    `).join("")}\n    `}function seachfaixa(text){const valor=text,discografia=JSON.parse(localStorage.getItem("discografia")),resultado=discografia.filter(album=>{const faixasEncontradas=album.faixas.filter(faixa=>faixa.nome.toLowerCase().includes(valor));return faixasEncontradas.length>0});if(0==resultado.length)return document.getElementById("tabela").innerHTML='\n        <div style="background-color: #ffffffa3; padding: 15px 65px; text-align: center; font-weight: 800; font-size: 20px;">\n            Nenhum resultado encontrado!\n        </div>\n        ';document.getElementById("tabela").innerHTML=`\n        ${resultado.map(album=>{const faixasFiltradas=album.faixas.filter(faixa=>faixa.nome.toLowerCase().includes(valor));return`\n        <table style="background-color: #ffffffa3;" class="centered">\n        <caption style="background-color: #ffffffa3;text-align: left;padding-left: 65px;font-weight: 800;">&Aacute;lbum ${album.nome} - ${album.id}</caption>\n        <thead>\n        <tr>\n            <th style="text-align: left;font-weight: 400; padding: 15px 65px;">N&ordm;</th>\n            <th style="text-align: left;font-weight: 400;">Faixa</th>\n            <th style="text-align: left;font-weight: 400; padding: 15px 65px;">Dura&ccedil;&atilde;o</th>\n        </tr>\n        </thead>\n        <tbody>\n        ${album.faixas.map(faixa=>`\n            <tr>\n            <td>${faixa.id}</td>\n            <td style="text-align: left; word-break: break-all; width: 100%;">${faixa.nome}</td>\n            <td>${faixa.duracao}</td>\n            </tr>\n        `).join("")}\n        </tbody>\n    </table>\n            `}).join("")}`}function cad(){Swal.fire({title:"Cadastrar",text:" O QUE VOCÊ DESEJA CADASTRAR?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#000000ab",confirmButtonText:"Cadastrar Álbum",cancelButtonText:"Cadastrar Faixa"}).then(result=>{if(result.isConfirmed)Swal.fire({title:"Cadastrar Álbum",html:'<input id="album" class="swal2" placeholder="Nome">',confirmButtonText:"Cadastrar",focusConfirm:!1,preConfirm:()=>{const nome=Swal.getPopup().querySelector("#album").value;nome||Swal.showValidationMessage("Preencha o nome do álbum!")}}).then(result=>{if(result.isConfirmed){var nome=document.getElementById("album").value,myHeaders=new Headers;myHeaders.append("Accept","application/json"),myHeaders.append("Content-Type","application/json");var raw=JSON.stringify({nome:nome}),requestOptions;fetch("http://127.0.0.1:8000/createalbum",{method:"POST",headers:myHeaders,body:raw,redirect:"follow"}).then(response=>response.json()).then(result=>cadverifica(result,"Álbum")).catch(error=>cadverifica(error,"Álbum"))}});else{var myHeaders=new Headers,requestOptions;fetch("http://127.0.0.1:8000/albums",{method:"GET",headers:myHeaders,redirect:"follow"}).then(response=>response.json()).then(result=>{var Options="";result.forEach(element=>{Options+=`<option value="${element.id}">${element.nome}</option>`});const selectHTML=`\n                  <select id="albumselect" class="swal2">\n                    ${Options}\n                  </select>\n                `;Swal.fire({title:"Cadastrar faixa",html:'<input id="faixa" class="swal2" placeholder="Nome"><input id="duracao" class="swal2" placeholder="Duração">'+selectHTML,confirmButtonText:"Cadastrar",focusConfirm:!1,preConfirm:()=>{const nome=Swal.getPopup().querySelector("#faixa").value,album=Swal.getPopup().querySelector("#albumselect").value,duracao=Swal.getPopup().querySelector("#duracao").value;if(nome&&album&&duracao){var myHeaders=new Headers;myHeaders.append("Accept","application/json"),myHeaders.append("Content-Type","application/json");var raw=JSON.stringify({nome:nome,id:album,duracao:duracao}),requestOptions;fetch("http://127.0.0.1:8000/createfaixa",{method:"POST",headers:myHeaders,body:raw,redirect:"follow"}).then(response=>response.json()).then(result=>cadverifica(result,"Faixa")).catch(error=>cadverifica(error,"Faixa"))}else Swal.showValidationMessage("Preencha todos os campos!")}})}).catch(error=>console.log("error",error))}})}function cadverifica(result,tipo){if("sucess"==result.message)return insertdiscografia(),void Swal.fire({icon:"success",title:"Sucesso!",position:"top-end",text:tipo+" "+result.cad.nome+" cadastrado com sucesso!",showConfirmButton:!1,timer:1500});Swal.fire({icon:"error",title:"Oops...",text:"Erro ao cadastrar álbum!"})}inputElement.addEventListener("input",(function(){""==inputElement.value&&insertdiscografia()}));
//# sourceMappingURL=script.min.js.map